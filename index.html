<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RFPong - Retro Arcade Game</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
--bg:#0a0d12;--bg2:#0f1419;--bg3:#151d27;
--text:#e2e8f0;--text2:#8899aa;--text3:#5a6d7e;
--accent:#0ea5e9;--accent2:#67e8f9;--green:#00d68f;--orange:#f59e0b;--red:#ef4444;
--border:#1e2d3d;--card:#0f1720;
}
body{font-family:'Segoe UI',system-ui,sans-serif;background:var(--bg);color:var(--text);margin:0;overflow:hidden;user-select:none}

/* Header */
.header{position:fixed;top:0;left:0;right:0;z-index:100;padding:16px;background:rgba(10,13,18,0.9);backdrop-filter:blur(10px);border-bottom:1px solid var(--border)}
.header-content{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto}
.logo{font-size:24px;font-weight:700;color:var(--accent2);display:flex;align-items:center;gap:8px}
.logo .icon{animation:bounce 2s ease-in-out infinite}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}
.score{font-family:'Courier New',monospace;font-size:18px;font-weight:600;display:flex;align-items:center;gap:16px}
.score-item{display:flex;flex-direction:column;align-items:center;gap:4px}
.score-label{font-size:12px;color:var(--text2);text-transform:uppercase;letter-spacing:1px}
.score-value{color:var(--accent2);font-size:24px}

/* Game Canvas */
.game-container{position:fixed;top:80px;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;background:radial-gradient(circle at center,rgba(14,165,233,0.03) 0%,transparent 70%)}
#gameCanvas{border:2px solid var(--accent);border-radius:8px;background:#000;box-shadow:0 0 30px rgba(14,165,233,0.3),inset 0 0 50px rgba(14,165,233,0.1)}

/* Controls */
.controls{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);display:flex;gap:12px;flex-wrap:wrap;justify-content:center}
.btn{padding:8px 16px;background:var(--accent);color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:14px;font-weight:600;transition:all 0.3s;font-family:inherit}
.btn:hover{background:var(--accent2);transform:translateY(-2px);box-shadow:0 4px 15px rgba(14,165,233,0.4)}
.btn:active{transform:translateY(0)}
.btn-secondary{background:var(--bg3);border:1px solid var(--border)}
.btn-secondary:hover{background:var(--bg4);border-color:var(--accent)}

/* Game Over Screen */
.game-over{position:fixed;inset:0;background:rgba(0,0,0,0.8);display:none;align-items:center;justify-content:center;z-index:200}
.game-over.active{display:flex}
.game-over-content{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:40px;text-align:center;max-width:400px;animation:slideIn 0.5s ease-out}
@keyframes slideIn{from{opacity:0;transform:scale(0.9)}to{opacity:1;transform:scale(1)}}
.game-over h2{font-size:28px;margin-bottom:16px;color:var(--accent2)}
.game-over p{color:var(--text2);margin-bottom:24px;font-size:16px}
.final-score{font-family:'Courier New',monospace;font-size:24px;color:var(--accent);margin-bottom:24px;font-weight:600}

/* Instructions */
.instructions{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--card);border:1px solid var(--border);border-radius:16px;padding:32px;text-align:center;max-width:500px;z-index:150}
.instructions.hidden{display:none}
.instructions h2{color:var(--accent2);margin-bottom:20px;font-size:24px}
.instructions ul{list-style:none;margin:20px 0;color:var(--text2)}
.instructions li{margin:8px 0;display:flex;align-items:center;gap:12px;justify-content:flex-start;text-align:left}
.instructions .key{background:var(--bg3);border:1px solid var(--border);border-radius:6px;padding:4px 8px;font-family:'Courier New',monospace;font-size:12px;min-width:50px;text-align:center;color:var(--accent2)}

/* Mobile Controls */
.mobile-controls{display:none;position:fixed;bottom:100px;left:0;right:0;justify-content:space-between;padding:0 40px;z-index:100}
.mobile-btn{width:80px;height:80px;background:var(--accent);border:none;border-radius:50%;color:#fff;font-size:24px;cursor:pointer;transition:all 0.3s;opacity:0.8}
.mobile-btn:active{background:var(--accent2);transform:scale(1.1)}

@media(max-width:768px){
.mobile-controls{display:flex}
.controls{bottom:200px}
.score{font-size:16px}
.score-value{font-size:20px}
}

/* Particles */
.particle{position:absolute;pointer-events:none;border-radius:50%;background:var(--accent2);opacity:0.8;animation:particleFade 1s ease-out forwards}
@keyframes particleFade{0%{opacity:0.8;transform:scale(1)}100%{opacity:0;transform:scale(0.3)}}

/* Retro Glow Effects */
.glow{text-shadow:0 0 10px currentColor;box-shadow:0 0 20px currentColor}
</style>
</head>
<body>

<div class="header">
<div class="header-content">
<div class="logo"><span class="icon">üèì</span> RFPong</div>
<div class="score">
<div class="score-item">
<div class="score-label">Player</div>
<div class="score-value" id="playerScore">0</div>
</div>
<div class="score-item">
<div class="score-label">AI</div>
<div class="score-value" id="aiScore">0</div>
</div>
</div>
</div>
</div>

<div class="game-container">
<canvas id="gameCanvas" width="800" height="400"></canvas>
</div>

<div class="controls">
<button class="btn" id="pauseBtn">‚è∏Ô∏è Pause</button>
<button class="btn btn-secondary" id="resetBtn">üîÑ Reset</button>
<button class="btn btn-secondary" id="helpBtn">‚ùì Help</button>
</div>

<div class="mobile-controls">
<button class="mobile-btn" id="upBtn">‚ñ≤</button>
<button class="mobile-btn" id="downBtn">‚ñº</button>
</div>

<div class="instructions" id="instructions">
<h2>üèì How to Play RFPong</h2>
<ul>
<li><span class="key">W / ‚Üë</span> Move paddle up</li>
<li><span class="key">S / ‚Üì</span> Move paddle down</li>
<li><span class="key">Space</span> Pause game</li>
<li><span class="key">R</span> Reset game</li>
</ul>
<p style="color:var(--text2);margin:20px 0">First to 7 points wins! Ball gets faster with each hit.</p>
<button class="btn" onclick="startGame()">üöÄ Start Playing</button>
</div>

<div class="game-over" id="gameOver">
<div class="game-over-content">
<h2 id="gameOverTitle">Game Over!</h2>
<p id="gameOverText">Great game!</p>
<div class="final-score" id="finalScore">Player 5 - 7 AI</div>
<button class="btn" onclick="resetGame()">üîÑ Play Again</button>
<button class="btn btn-secondary" onclick="showInstructions()">üìñ Instructions</button>
</div>
</div>

<script>
// Game variables
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
let gameRunning = false;
let gamePaused = false;
let animationId;

// Game objects
const game = {
player: { x: 20, y: canvas.height / 2 - 50, width: 10, height: 100, speed: 6, score: 0 },
ai: { x: canvas.width - 30, y: canvas.height / 2 - 50, width: 10, height: 100, speed: 4, score: 0 },
ball: { x: canvas.width / 2, y: canvas.height / 2, radius: 8, speedX: 4, speedY: 3, maxSpeed: 12, trail: [] }
};

// Input handling
const keys = {};
document.addEventListener('keydown', (e) => {
keys[e.code] = true;
if (e.code === 'Space') {
e.preventDefault();
togglePause();
}
if (e.code === 'KeyR') {
resetGame();
}
});
document.addEventListener('keyup', (e) => {
keys[e.code] = false;
});

// Mobile controls
document.getElementById('upBtn').addEventListener('touchstart', (e) => {
e.preventDefault();
keys['ArrowUp'] = true;
});
document.getElementById('upBtn').addEventListener('touchend', (e) => {
e.preventDefault();
keys['ArrowUp'] = false;
});
document.getElementById('downBtn').addEventListener('touchstart', (e) => {
e.preventDefault();
keys['ArrowDown'] = true;
});
document.getElementById('downBtn').addEventListener('touchend', (e) => {
e.preventDefault();
keys['ArrowDown'] = false;
});

// Button events
document.getElementById('pauseBtn').addEventListener('click', togglePause);
document.getElementById('resetBtn').addEventListener('click', resetGame);
document.getElementById('helpBtn').addEventListener('click', showInstructions);

// Game functions
function startGame() {
document.getElementById('instructions').classList.add('hidden');
gameRunning = true;
gamePaused = false;
gameLoop();
}

function togglePause() {
if (!gameRunning) return;
gamePaused = !gamePaused;
document.getElementById('pauseBtn').textContent = gamePaused ? '‚ñ∂Ô∏è Resume' : '‚è∏Ô∏è Pause';
if (!gamePaused) gameLoop();
}

function resetGame() {
gameRunning = false;
gamePaused = false;
if (animationId) cancelAnimationFrame(animationId);

// Reset positions and scores
game.player.y = canvas.height / 2 - 50;
game.ai.y = canvas.height / 2 - 50;
game.ball.x = canvas.width / 2;
game.ball.y = canvas.height / 2;
game.ball.speedX = 4 * (Math.random() > 0.5 ? 1 : -1);
game.ball.speedY = (Math.random() - 0.5) * 6;
game.ball.trail = [];
game.player.score = 0;
game.ai.score = 0;

updateScore();
document.getElementById('gameOver').classList.remove('active');
document.getElementById('pauseBtn').textContent = '‚è∏Ô∏è Pause';

// Restart
startGame();
}

function showInstructions() {
gameRunning = false;
gamePaused = false;
if (animationId) cancelAnimationFrame(animationId);
document.getElementById('instructions').classList.remove('hidden');
document.getElementById('gameOver').classList.remove('active');
}

function gameLoop() {
if (!gameRunning || gamePaused) return;

update();
draw();
animationId = requestAnimationFrame(gameLoop);
}

function update() {
// Player movement
if (keys['KeyW'] || keys['ArrowUp']) {
game.player.y = Math.max(0, game.player.y - game.player.speed);
}
if (keys['KeyS'] || keys['ArrowDown']) {
game.player.y = Math.min(canvas.height - game.player.height, game.player.y + game.player.speed);
}

// AI movement (with some imperfection)
const aiCenter = game.ai.y + game.ai.height / 2;
const ballY = game.ball.y;
const diff = ballY - aiCenter;
const aiSpeed = game.ai.speed + (game.ai.score * 0.2); // AI gets faster as it scores

if (Math.abs(diff) > 5) {
if (diff > 0) {
game.ai.y = Math.min(canvas.height - game.ai.height, game.ai.y + aiSpeed);
} else {
game.ai.y = Math.max(0, game.ai.y - aiSpeed);
}
}

// Ball movement
game.ball.x += game.ball.speedX;
game.ball.y += game.ball.speedY;

// Ball trail
game.ball.trail.push({ x: game.ball.x, y: game.ball.y });
if (game.ball.trail.length > 8) {
game.ball.trail.shift();
}

// Ball collision with top/bottom
if (game.ball.y - game.ball.radius <= 0 || game.ball.y + game.ball.radius >= canvas.height) {
game.ball.speedY = -game.ball.speedY;
createParticles(game.ball.x, game.ball.y, '#67e8f9', 5);
}

// Ball collision with paddles
if (game.ball.x - game.ball.radius <= game.player.x + game.player.width &&
game.ball.y >= game.player.y && game.ball.y <= game.player.y + game.player.height &&
game.ball.speedX < 0) {

// Calculate hit position
const hitPos = (game.ball.y - game.player.y - game.player.height / 2) / (game.player.height / 2);
game.ball.speedX = Math.abs(game.ball.speedX) * 1.05; // Increase speed
game.ball.speedY = hitPos * 6;

// Cap max speed
game.ball.speedX = Math.min(game.ball.speedX, game.ball.maxSpeed);
createParticles(game.ball.x, game.ball.y, '#00d68f', 8);
}

if (game.ball.x + game.ball.radius >= game.ai.x &&
game.ball.y >= game.ai.y && game.ball.y <= game.ai.y + game.ai.height &&
game.ball.speedX > 0) {

const hitPos = (game.ball.y - game.ai.y - game.ai.height / 2) / (game.ai.height / 2);
game.ball.speedX = -Math.abs(game.ball.speedX) * 1.05;
game.ball.speedY = hitPos * 6;

game.ball.speedX = Math.max(game.ball.speedX, -game.ball.maxSpeed);
createParticles(game.ball.x, game.ball.y, '#f59e0b', 8);
}

// Scoring
if (game.ball.x < 0) {
game.ai.score++;
resetBall();
createParticles(canvas.width - 50, canvas.height / 2, '#ef4444', 15);
}
if (game.ball.x > canvas.width) {
game.player.score++;
resetBall();
createParticles(50, canvas.height / 2, '#00d68f', 15);
}

updateScore();

// Check win condition
if (game.player.score >= 7 || game.ai.score >= 7) {
endGame();
}
}

function resetBall() {
game.ball.x = canvas.width / 2;
game.ball.y = canvas.height / 2;
game.ball.speedX = 4 * (Math.random() > 0.5 ? 1 : -1);
game.ball.speedY = (Math.random() - 0.5) * 4;
game.ball.trail = [];
}

function draw() {
// Clear canvas with fade effect
ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
ctx.fillRect(0, 0, canvas.width, canvas.height);

// Draw center line
ctx.strokeStyle = '#1e2d3d';
ctx.lineWidth = 2;
ctx.setLineDash([10, 10]);
ctx.beginPath();
ctx.moveTo(canvas.width / 2, 0);
ctx.lineTo(canvas.width / 2, canvas.height);
ctx.stroke();
ctx.setLineDash([]);

// Draw ball trail
game.ball.trail.forEach((pos, index) => {
const alpha = (index / game.ball.trail.length) * 0.3;
ctx.fillStyle = `rgba(103, 232, 249, ${alpha})`;
ctx.beginPath();
ctx.arc(pos.x, pos.y, game.ball.radius * 0.5, 0, Math.PI * 2);
ctx.fill();
});

// Draw ball with glow
ctx.shadowBlur = 15;
ctx.shadowColor = '#67e8f9';
ctx.fillStyle = '#67e8f9';
ctx.beginPath();
ctx.arc(game.ball.x, game.ball.y, game.ball.radius, 0, Math.PI * 2);
ctx.fill();

// Draw paddles with glow
ctx.shadowBlur = 10;
ctx.shadowColor = '#0ea5e9';
ctx.fillStyle = '#0ea5e9';
ctx.fillRect(game.player.x, game.player.y, game.player.width, game.player.height);
ctx.fillRect(game.ai.x, game.ai.y, game.ai.width, game.ai.height);

// Reset shadow
ctx.shadowBlur = 0;
}

function createParticles(x, y, color, count) {
for (let i = 0; i < count; i++) {
const particle = document.createElement('div');
particle.className = 'particle';
particle.style.left = x + 'px';
particle.style.top = y + 'px';
particle.style.background = color;
particle.style.width = (Math.random() * 4 + 2) + 'px';
particle.style.height = particle.style.width;

const moveX = (Math.random() - 0.5) * 100;
const moveY = (Math.random() - 0.5) * 100;
particle.style.transform = `translate(${moveX}px, ${moveY}px)`;

document.body.appendChild(particle);
setTimeout(() => particle.remove(), 1000);
}
}

function updateScore() {
document.getElementById('playerScore').textContent = game.player.score;
document.getElementById('aiScore').textContent = game.ai.score;
}

function endGame() {
gameRunning = false;
const gameOverEl = document.getElementById('gameOver');
const titleEl = document.getElementById('gameOverTitle');
const textEl = document.getElementById('gameOverText');
const scoreEl = document.getElementById('finalScore');

if (game.player.score >= 7) {
titleEl.textContent = 'üéâ You Win!';
textEl.textContent = 'Incredible! You defeated the AI!';
createParticles(canvas.width / 2, canvas.height / 2, '#00d68f', 20);
} else {
titleEl.textContent = 'üíÄ AI Wins!';
textEl.textContent = 'The AI was too strong this time!';
createParticles(canvas.width / 2, canvas.height / 2, '#ef4444', 20);
}

scoreEl.textContent = `Player ${game.player.score} - ${game.ai.score} AI`;
gameOverEl.classList.add('active');
}

// Resize canvas on window resize
window.addEventListener('resize', () => {
const container = canvas.parentElement;
const rect = container.getBoundingClientRect();
const maxWidth = Math.min(800, rect.width - 40);
const maxHeight = Math.min(400, rect.height - 40);

canvas.style.width = maxWidth + 'px';
canvas.style.height = maxHeight + 'px';
});

// Initial resize
window.dispatchEvent(new Event('resize'));

// Show instructions on load
showInstructions();
</script>

</body>
</html>